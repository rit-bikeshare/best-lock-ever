webpackJsonp([1],{NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("7+uW"),i=n("Zrlr"),c=n.n(i),s=n("wxAW"),a=n.n(s),l=n("YqB/"),r=function(){function t(){c()(this,t),this.id=null,this.state="locked",this.lockTime=3e3,this.ws=new l.WebSocketBridge,this.currentLocation=null,this.locationOptions=[{text:"Infinity quad",value:{lat:43.084239,lon:-77.677103}},{text:"Dorms",value:{lat:43.084969497463426,lon:-77.66809342460635}},{text:"Golisano Test",value:{lat:43.08429881270753,lon:-77.68011275678873}},{text:"Perkins",value:{lat:43.08573676229464,lon:-77.65925205026247}},{text:"Global village",value:{lat:43.0828651755582,lon:-77.67961200695049}}]}return a()(t,[{key:"connect",value:function(t){var e=this;e.ws.connect(t),e.ws.listen(function(t,n){if(t.error)return console.error(t.error),void e.disconnect();"ident"==t.command&&e.ws.send({id:e.id}),"lock"==t.command&&e.lock(),"unlock"==t.command&&e.unlock()})}},{key:"disconnect",value:function(){this.ws.socket.close(1e3,"",{keepClosed:!0}),this.ws=new l.WebSocketBridge}},{key:"setState",value:function(t){this.state=t,this.ws.socket&&this.ws.send({state:t})}},{key:"lock",value:function(){var t=this;this.setState("locking");setTimeout(function(){t.setState("locked")},this.lockTime)}},{key:"unlock",value:function(){var t=this;this.setState("unlocking");setTimeout(function(){t.setState("unlocked")},this.lockTime)}},{key:"updateLocation",value:function(t){var e={location:t};console.log(e),this.ws.send(e)}}]),t}(),u={name:"LockState",props:{state:{type:String,required:!0}}},d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"lock-state"},[e("span",{class:this.state},[this._v(this._s(this.state))])])},staticRenderFns:[]};var v={name:"App",components:{LockState:n("VU/8")(u,d,!1,function(t){n("wQBs")},"data-v-248673a8",null).exports},data:function(){return{location:null,lock:new r,address:"wss://bikesharedev.rit.edu/api/ws/lock/register"}}},k={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",[n("div",[t._v("\n      Connection URL: "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],attrs:{type:"text"},domProps:{value:t.address},on:{input:function(e){e.target.composing||(t.address=e.target.value)}}})]),t._v(" "),n("div",[t._v("\n      Lock ID: "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.lock.id,expression:"lock.id"}],attrs:{type:"text"},domProps:{value:t.lock.id},on:{input:function(e){e.target.composing||t.$set(t.lock,"id",e.target.value)}}})]),t._v(" "),n("div",[!t.lock.ws.socket||t.lock.ws.socket.readyState>=2?n("button",{on:{click:function(e){t.lock.connect(t.address+"/"+t.lock.id)}}},[t._v("Connect")]):n("button",{on:{click:function(e){t.lock.disconnect()}}},[t._v("Disconnect")])])]),t._v(" "),n("hr"),t._v(" "),n("lock-state",{attrs:{state:t.lock.state}}),t._v(" "),n("div",["locked"==t.lock.state?n("button",{on:{click:function(e){t.lock.unlock()}}},[t._v("Unlock")]):"unlocked"==t.lock.state?n("button",{on:{click:function(e){t.lock.lock()}}},[t._v("Lock")]):t._e()]),t._v(" "),n("hr"),t._v(" "),n("div",[t._v("\n    Location: \n    "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.location,expression:"location"}],on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.location=e.target.multiple?n:n[0]},function(e){t.lock.updateLocation({lat:t.location.lat,lon:t.location.lon})}]}},[n("option",{attrs:{disabled:"",value:""}},[t._v("Select a bike location")]),t._v(" "),t._l(t.lock.locationOptions,function(e){return n("option",{key:e.text,domProps:{value:e.value}},[t._v("\n        "+t._s(e.text)+"\n      ")])})],2)])],1)},staticRenderFns:[]};var p=n("VU/8")(v,k,!1,function(t){n("rBjI")},null,null).exports;o.a.config.productionTip=!1,o.a.config.devtools=!0,new o.a({el:"#app",components:{App:p},template:"<App/>"})},rBjI:function(t,e){},wQBs:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.a977fa1b5f45a3cb4fe6.js.map